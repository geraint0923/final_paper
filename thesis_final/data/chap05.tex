

\chapter{性能回退判断算法的设计实现及优化}
由于我们设计和实现的是性能测试框架，因此在我们的框架中自然需要找到性能回退问题，而这就需要需要使用一个算法通过测试的结果来判断某一个版本的内核是否出现了性能回退问题。


\section{性能回退判断算法的设计}
要设计一个性能回退的判断算法，首先需要知道性能测试的结果有什么特征，然后才能根据这个数据上出现的特征来设计相应的算法。

\subsection{判断难点}
一般对于内核，我们会考察内核是否存在bug以及是否存在性能回退问题。

对于内核中的bug，能够进行比较容易的判断，因为内核中的bug在触发之后往往能够导致内核崩溃，出现kernel panic，通过判断kernel panic的出现，可以比较简单快捷地判断出来，而且进行内核bug判断的时候，我们一般并不需要使用过往的测试结果和判断结果。

相比之下，性能回退的判断更为困难，主要存在以下难点：
\begin{enumerate}
\item 每次进行测试的测试机很难实现硬件的统一和状态相似
\item 测试结果具有较大的波动性
\item 在进行判断的时候需要使用过往的测试结果作为参考
\end{enumerate}

因此，需要考虑这些性能回退判断的难点才能设计出比较科学合理的性能回退判断算法。
\subsection{测试前提}
每次尽可能使得测试机的状态相似。
\subsection{设计思路}
多次测试以及进行长时间的测试。
\subsection{算法设计}
使用测试历史判断。
\section{性能回退判断算法的实现}
具体实现机制

单次bisect的判断

\section{性能回退判断算法的优化}
在将某一次的测试结果加进测试结果历史之前，先判断该版本的内核是否是具有标签的，我们只将具有标签的内核测试结果加入到测试结果历史中。